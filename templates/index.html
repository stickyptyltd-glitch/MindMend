{% extends "base.html" %}

{% block title %}Mind Mend - AI Mental Health Platform{% endblock %}

{% block content %}
<div class="row">
    <!-- Hero Section -->
    <div class="col-12">
        <div class="jumbotron bg-primary text-white rounded p-4 mb-4">
            <div class="container text-center">
                <div class="d-flex align-items-center justify-content-center mb-3">
                    <img src="/static/logos/mindmend_logo_4.svg" alt="Mind Mend" height="80" class="me-3">
                    <h1 class="display-4 mb-0">Mind Mend</h1>
                </div>
                <p class="lead">Advanced AI-powered mental health support with video assessment, biometric integration, and expert human guidance.</p>
                <hr class="my-4">
                <p>Experience comprehensive therapy with real-time emotion analysis, personalized exercises, and 24/7 AI support.</p>
                <div class="mt-3">
                    <a href="{{ url_for('subscribe') }}" class="btn btn-warning btn-lg me-3">
                        <i class="fas fa-crown me-2"></i>Upgrade to Premium
                    </a>
                    <a href="{{ url_for('individual_therapy') }}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-play me-2"></i>Start Free Session
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row g-4">
    <!-- Individual Therapy -->
    <div class="col-lg-4 col-md-6">
        <div class="card h-100 border-primary">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-user me-2"></i>Individual Therapy
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Personal one-on-one AI therapy sessions with advanced emotion recognition and biometric monitoring.</p>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i>Video emotion analysis</li>
                    <li><i class="fas fa-check text-success me-2"></i>Heart rate monitoring</li>
                    <li><i class="fas fa-check text-success me-2"></i>Personalized exercises</li>
                    <li><i class="fas fa-check text-success me-2"></i>Crisis detection</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('individual_therapy') }}" class="btn btn-primary w-100">
                    <i class="fas fa-play me-2"></i>Start Individual Session
                </a>
            </div>
        </div>
    </div>

    <!-- Relationship Therapy -->
    <div class="col-lg-4 col-md-6">
        <div class="card h-100 border-danger">
            <div class="card-header bg-danger text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-heart me-2"></i>Relationship Therapy
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">AI-guided couples counseling with communication analysis and relationship dynamics assessment.</p>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i>Dual emotion tracking</li>
                    <li><i class="fas fa-check text-success me-2"></i>Communication patterns</li>
                    <li><i class="fas fa-check text-success me-2"></i>Conflict resolution</li>
                    <li><i class="fas fa-check text-success me-2"></i>Attachment analysis</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('relationship_therapy') }}" class="btn btn-danger w-100">
                    <i class="fas fa-play me-2"></i>Start Relationship Session
                </a>
            </div>
        </div>
    </div>

    <!-- Group Therapy -->
    <div class="col-lg-4 col-md-6">
        <div class="card h-100 border-success">
            <div class="card-header bg-success text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-users me-2"></i>Group Therapy
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Facilitated group sessions with AI moderation and peer support analytics.</p>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i>Group dynamics AI</li>
                    <li><i class="fas fa-check text-success me-2"></i>Peer support tracking</li>
                    <li><i class="fas fa-check text-success me-2"></i>Participation analysis</li>
                    <li><i class="fas fa-check text-success me-2"></i>Social connection metrics</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('group_therapy') }}" class="btn btn-success w-100">
                    <i class="fas fa-play me-2"></i>Join Group Session
                </a>
            </div>
        </div>
    </div>

    <!-- Video Assessment -->
    <div class="col-lg-6 col-md-6">
        <div class="card h-100 border-info">
            <div class="card-header bg-info text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-video me-2"></i>AI Video Assessment
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Comprehensive AI-powered video interview with microexpression analysis and emotional state evaluation.</p>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i>Facial expression analysis</li>
                    <li><i class="fas fa-check text-success me-2"></i>Voice tone analysis</li>
                    <li><i class="fas fa-check text-success me-2"></i>Eye movement tracking</li>
                    <li><i class="fas fa-check text-success me-2"></i>Microexpression detection</li>
                    <li><i class="fas fa-check text-success me-2"></i>Real-time mood assessment</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('video_assess') }}" class="btn btn-info w-100">
                    <i class="fas fa-camera me-2"></i>Start Video Assessment
                </a>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="col-lg-6 col-md-6">
        <div class="card h-100 border-warning">
            <div class="card-header bg-warning text-dark">
                <h5 class="card-title mb-0">
                    <i class="fas fa-chart-line me-2"></i>Progress Dashboard
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Track your mental health journey with comprehensive analytics and biometric integration.</p>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i>Progress tracking</li>
                    <li><i class="fas fa-check text-success me-2"></i>Biometric integration</li>
                    <li><i class="fas fa-check text-success me-2"></i>Exercise completion</li>
                    <li><i class="fas fa-check text-success me-2"></i>Mood trends</li>
                    <li><i class="fas fa-check text-success me-2"></i>Risk assessment</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('dashboard') }}" class="btn btn-warning w-100">
                    <i class="fas fa-chart-bar me-2"></i>View Dashboard
                </a>
            </div>
        </div>
    </div>
    
    <!-- Level 2 Premium Features -->
    <div class="col-lg-6 col-md-6">
        <div class="card h-100 border-warning">
            <div class="card-header bg-warning text-dark">
                <h5 class="card-title mb-0">
                    <i class="fas fa-user-md me-2"></i>Human Counselors
                    <span class="badge bg-danger ms-2">Level 2</span>
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Connect with licensed mental health professionals for premium therapy sessions.</p>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i>Licensed therapists</li>
                    <li><i class="fas fa-check text-success me-2"></i>Video sessions</li>
                    <li><i class="fas fa-check text-success me-2"></i>Insurance coverage</li>
                    <li><i class="fas fa-check text-success me-2"></i>24/7 crisis support</li>
                    <li><i class="fas fa-clock text-warning me-2"></i>Coming soon</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('counselor_signup') }}" class="btn btn-warning w-100">
                    <i class="fas fa-bell me-2"></i>Join Waitlist
                </a>
            </div>
        </div>
    </div>
    
    <!-- Enhanced AI Features -->
    <div class="col-lg-6 col-md-6">
        <div class="card h-100 border-light">
            <div class="card-header bg-light text-dark">
                <h5 class="card-title mb-0">
                    <i class="fas fa-brain me-2"></i>Enhanced AI Features
                    <span class="badge bg-success ms-2">Level 2</span>
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Real OpenAI GPT-4o integration with advanced therapeutic capabilities.</p>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i>Real AI responses</li>
                    <li><i class="fas fa-check text-success me-2"></i>Session-specific prompts</li>
                    <li><i class="fas fa-check text-success me-2"></i>Advanced crisis detection</li>
                    <li><i class="fas fa-check text-success me-2"></i>Personalized therapy</li>
                    <li><i class="fas fa-check text-success me-2"></i>Microexpression hooks</li>
                </ul>
            </div>
            <div class="card-footer">
                <a href="{{ url_for('individual_therapy') }}" class="btn btn-light w-100">
                    <i class="fas fa-robot me-2"></i>Try Enhanced AI
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="row mt-5">
    <div class="col-12">
        <h2 class="text-center mb-4">
            <i class="fas fa-star me-2"></i>Advanced AI Features
        </h2>
    </div>
</div>

<div class="row g-4">
    <div class="col-md-3 text-center">
        <div class="card bg-dark border-0 h-100">
            <div class="card-body">
                <i class="fas fa-robot fa-3x text-primary mb-3"></i>
                <h5>Multi-Modal AI</h5>
                <p class="text-muted">Combines text, video, audio, and biometric data for comprehensive analysis.</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-3 text-center">
        <div class="card bg-dark border-0 h-100">
            <div class="card-body">
                <i class="fas fa-heartbeat fa-3x text-danger mb-3"></i>
                <h5>Biometric Integration</h5>
                <p class="text-muted">Real-time monitoring of heart rate, stress levels, and sleep patterns.</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-3 text-center">
        <div class="card bg-dark border-0 h-100">
            <div class="card-body">
                <i class="fas fa-eye fa-3x text-info mb-3"></i>
                <h5>Microexpression Detection</h5>
                <p class="text-muted">Advanced facial analysis to detect subtle emotional changes.</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-3 text-center">
        <div class="card bg-dark border-0 h-100">
            <div class="card-body">
                <i class="fas fa-shield-alt fa-3x text-success mb-3"></i>
                <h5>Crisis Prevention</h5>
                <p class="text-muted">AI-powered risk assessment with immediate intervention protocols.</p>
            </div>
        </div>
    </div>
</div>

<!-- CTA Section -->
<div class="row mt-5">
    <div class="col-12">
        <div class="card bg-gradient border-0 text-center">
            <div class="card-body py-5">
                <h3 class="text-white mb-3">Ready to start your mental health journey?</h3>
                <p class="text-white-50 mb-4">Experience the future of therapy with AI-powered insights and human expertise.</p>
                <div class="d-flex justify-content-center gap-3 flex-wrap">
                    <a href="{{ url_for('register') }}" class="btn btn-success btn-lg">
                        <i class="fas fa-user-plus me-2"></i>Create Account
                    </a>
                    <a href="{{ url_for('login') }}" class="btn btn-primary btn-lg">
                        <i class="fas fa-sign-in-alt me-2"></i>Sign In
                    </a>
                    <a href="{{ url_for('onboarding') }}" class="btn btn-outline-light btn-lg tutorial-btn">
                        <i class="fas fa-graduation-cap me-2"></i>Interactive Tutorial
                    </a>
                    <a href="{{ url_for('video_assess') }}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-video me-2"></i>Video Assessment
                    </a>
                    <a href="{{ url_for('counselor.employment_opportunities') }}" class="btn btn-warning btn-lg">
                        <i class="fas fa-user-md me-2"></i>Join Our Team
                    </a>
                    <a href="{{ url_for('admin.admin_login') }}" class="btn btn-outline-light btn-sm">
                        <i class="fas fa-cog me-2"></i>Admin Panel
                    </a>
                    <a href="/media" class="btn btn-info btn-sm ms-2">
                        <i class="fas fa-newspaper me-2"></i>Media Pack
                    </a>
                    <a href="/logos" class="btn btn-secondary btn-sm ms-2">
                        <i class="fas fa-palette me-2"></i>Logo Options
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Global function declarations
function showTutorialPrompt() {
    // Create tutorial prompt modal
    const modal = document.createElement('div');
    modal.className = 'tutorial-prompt-modal';
    modal.innerHTML = `
        <div class="tutorial-prompt-overlay"></div>
        <div class="tutorial-prompt-content">
            <div class="tutorial-prompt-header">
                <h3>Welcome to Mind Mend!</h3>
                <button class="tutorial-close-btn" onclick="closeTutorialPrompt()">&times;</button>
            </div>
            <div class="tutorial-prompt-body">
                <div class="tutorial-character">
                    <div class="character-mini">
                        <div class="eyes-mini">
                            <div class="eye-mini"></div>
                            <div class="eye-mini"></div>
                        </div>
                        <div class="mouth-mini"></div>
                    </div>
                </div>
                <div class="tutorial-message">
                    <p>Hi! I'm Alex, your guide. Since this is your first visit, would you like me to show you around the platform?</p>
                    <p class="tutorial-benefits">The tutorial covers:</p>
                    <ul>
                        <li>How to choose the right therapy type</li>
                        <li>Meeting our AI therapists</li>
                        <li>Interactive features overview</li>
                        <li>Safety and crisis support</li>
                    </ul>
                </div>
            </div>
            <div class="tutorial-prompt-actions">
                <button class="tutorial-btn secondary" onclick="startTutorial()">
                    <i class="fas fa-graduation-cap"></i> Yes, Show Me Around
                </button>
                <button class="tutorial-btn primary" onclick="skipAndExplore()">
                    <i class="fas fa-compass"></i> Skip, I'll Explore
                </button>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    
    // Add styles
    const style = document.createElement('style');
    style.textContent = `
        .tutorial-prompt-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .tutorial-prompt-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }
        
        .tutorial-prompt-content {
            background: white;
            border-radius: 20px;
            padding: 0;
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: slideUp 0.4s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .tutorial-prompt-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1.5rem 2rem;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .tutorial-prompt-header h3 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .tutorial-close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s ease;
        }
        
        .tutorial-close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .tutorial-prompt-body {
            padding: 2rem;
            display: flex;
            gap: 1.5rem;
            align-items: flex-start;
        }
        
        .tutorial-character {
            flex-shrink: 0;
        }
        
        .character-mini {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: bounce 2s infinite;
        }
        
        .eyes-mini {
            display: flex;
            gap: 4px;
            margin-bottom: 4px;
        }
        
        .eye-mini {
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
        }
        
        .mouth-mini {
            width: 8px;
            height: 4px;
            border: 1px solid white;
            border-top: none;
            border-radius: 0 0 8px 8px;
        }
        
        .tutorial-message {
            flex: 1;
        }
        
        .tutorial-message p {
            margin-bottom: 1rem;
            color: #333;
            line-height: 1.5;
        }
        
        .tutorial-benefits {
            font-weight: 600;
            margin-bottom: 0.5rem !important;
        }
        
        .tutorial-message ul {
            margin: 0;
            padding-left: 1.5rem;
            color: #666;
        }
        
        .tutorial-message li {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .tutorial-prompt-actions {
            padding: 1.5rem 2rem 2rem;
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        
        .tutorial-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .tutorial-btn.secondary {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }
        
        .tutorial-btn.primary {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border: 2px solid #667eea;
        }
        
        .tutorial-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tutorial-btn.pulse {
            animation: tutorialPulse 2s infinite;
        }
        
        @keyframes tutorialPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    `;
    document.head.appendChild(style);
    
    // Add pulse animation to tutorial button
    document.querySelector('.tutorial-btn').classList.add('pulse');
}

function startTutorial() {
    window.location.href = '/onboarding';
}

function skipAndExplore() {
    localStorage.setItem('mindMendTutorialCompleted', 'true');
    closeTutorialPrompt();
}

function closeTutorialPrompt() {
    const modal = document.querySelector('.tutorial-prompt-modal');
    if (modal) {
        modal.style.animation = 'fadeOut 0.3s ease';
        setTimeout(() => {
            modal.remove();
        }, 300);
    }
}

// Add any JavaScript for the home page here
document.addEventListener('DOMContentLoaded', function() {
    // Check if user is new and show tutorial prompt
    if (!localStorage.getItem('mindMendTutorialCompleted') && !sessionStorage.getItem('tutorialPromptShown')) {
        sessionStorage.setItem('tutorialPromptShown', 'true');
        setTimeout(showTutorialPrompt, 1000); // Delay to ensure page is fully loaded
    }
    
    // Animate cards on scroll
    const cards = document.querySelectorAll('.card');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animation = 'fadeInUp 0.6s ease-out forwards';
            }
        });
    });
    
    cards.forEach(card => {
        observer.observe(card);
    });
});

// Add fadeOut animation
const fadeOutStyle = document.createElement('style');
fadeOutStyle.textContent = `
    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
    }
`;
document.head.appendChild(fadeOutStyle);
</script>
{% endblock %}
